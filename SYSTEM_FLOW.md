# ğŸ”„ ClimaRisk AI - System Flow Diagram

## Visual Flow: Dynamic Calculation Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INTERACTION (Frontend)                       â”‚
â”‚                                                                      â”‚
â”‚  1. User enters coordinates: (28.6139, 77.2090)                    â”‚
â”‚  2. Clicks "Calculate Risk Score"                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  HTTP REQUEST (Dynamic API Call)                     â”‚
â”‚                                                                      â”‚
â”‚  POST /api/v1/score                                                 â”‚
â”‚  {                                                                  â”‚
â”‚    "latitude": 28.6139,                                             â”‚
â”‚    "longitude": 77.2090,                                            â”‚
â”‚    "property_type": "residential"                                   â”‚
â”‚  }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               FASTAPI BACKEND (Receives Request)                     â”‚
â”‚                                                                      â”‚
â”‚  Endpoint: /api/v1/score                                            â”‚
â”‚  Validates: Coordinates, property type                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ENSEMBLE SCORER (Orchestrates Calculation)               â”‚
â”‚                                                                      â”‚
â”‚  Creates instance of EnsembleScorer                                 â”‚
â”‚  Calls individual risk models in parallel                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FLOOD MODEL  â”‚    â”‚  HEAT MODEL  â”‚    â”‚ DROUGHT MODELâ”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ Input:       â”‚    â”‚ Input:       â”‚    â”‚ Input:       â”‚
â”‚ â€¢ lat: 28.61 â”‚    â”‚ â€¢ lat: 28.61 â”‚    â”‚ â€¢ lat: 28.61 â”‚
â”‚ â€¢ lon: 77.21 â”‚    â”‚ â€¢ lon: 77.21 â”‚    â”‚ â€¢ lon: 77.21 â”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ Processing:  â”‚    â”‚ Processing:  â”‚    â”‚ Processing:  â”‚
â”‚ â€¢ Check elev â”‚    â”‚ â€¢ Check lat  â”‚    â”‚ â€¢ Check prec â”‚
â”‚ â€¢ Check coastâ”‚    â”‚ â€¢ Check urbanâ”‚    â”‚ â€¢ Check arid â”‚
â”‚ â€¢ Check riverâ”‚    â”‚ â€¢ Check pop  â”‚    â”‚ â€¢ Check monsoâ”‚
â”‚              â”‚    â”‚              â”‚    â”‚              â”‚
â”‚ Output:      â”‚    â”‚ Output:      â”‚    â”‚ Output:      â”‚
â”‚ Score: 32.1  â”‚    â”‚ Score: 58.5  â”‚    â”‚ Score: 41.2  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GROUNDWATER MODEL (4th Risk Type)                       â”‚
â”‚                                                                      â”‚
â”‚  Input: lat, lon                                                    â”‚
â”‚  Processing: Check region, extraction zones, recharge               â”‚
â”‚  Output: Score: 52.8                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ENSEMBLE COMBINATION (Weighted Average)                 â”‚
â”‚                                                                      â”‚
â”‚  Calculate:                                                          â”‚
â”‚    total = (32.1 Ã— 0.25) +  â† Flood (25% weight)                   â”‚
â”‚            (58.5 Ã— 0.25) +  â† Heat (25% weight)                    â”‚
â”‚            (41.2 Ã— 0.20) +  â† Drought (20% weight)                 â”‚
â”‚            (52.8 Ã— 0.15) +  â† Groundwater (15% weight)             â”‚
â”‚            (35.6 Ã— 0.15)    â† Rainfall (15% weight)                â”‚
â”‚                                                                      â”‚
â”‚  Result: 45.2                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RISK LEVEL CLASSIFICATION                               â”‚
â”‚                                                                      â”‚
â”‚  Score: 45.2                                                        â”‚
â”‚  Check: 25 â‰¤ 45.2 < 50                                             â”‚
â”‚  Classification: "moderate"                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CONFIDENCE CALCULATION                                  â”‚
â”‚                                                                      â”‚
â”‚  Analyze variance between model scores                              â”‚
â”‚  Lower variance = Higher confidence                                 â”‚
â”‚  Result: 0.87 (87% confidence)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RESPONSE FORMATTING                                     â”‚
â”‚                                                                      â”‚
â”‚  {                                                                  â”‚
â”‚    "clima_risk_score": 45.2,                                        â”‚
â”‚    "risk_breakdown": {                                              â”‚
â”‚      "flood": 32.1,                                                 â”‚
â”‚      "heat": 58.5,                                                  â”‚
â”‚      "drought": 41.2,                                               â”‚
â”‚      "groundwater": 52.8,                                           â”‚
â”‚      "rainfall": 35.6                                               â”‚
â”‚    },                                                               â”‚
â”‚    "risk_level": "moderate",                                        â”‚
â”‚    "confidence": 0.87,                                              â”‚
â”‚    "calculated_at": "2024-01-15T10:30:00"                          â”‚
â”‚  }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HTTP RESPONSE (JSON)                                    â”‚
â”‚                                                                      â”‚
â”‚  Status: 200 OK                                                     â”‚
â”‚  Content-Type: application/json                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FRONTEND DISPLAY (Dynamic Rendering)                    â”‚
â”‚                                                                      â”‚
â”‚  â€¢ Display score: 45.2                                              â”‚
â”‚  â€¢ Show risk level badge: "MODERATE RISK"                           â”‚
â”‚  â€¢ Render breakdown cards: Flood, Heat, etc.                        â”‚
â”‚  â€¢ Generate recommendations                                         â”‚
â”‚  â€¢ Update map marker                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš¡ Key Characteristics

### **Timing:**
- â±ï¸ Total time: **< 500 milliseconds**
- âš¡ Model calculations: **~100ms each** (parallel)
- âš¡ Ensemble combination: **< 10ms**
- âš¡ Response formatting: **< 5ms**

### **Dynamic Elements:**
âœ… Every step is calculated on-demand  
âœ… No cached results  
âœ… Location-specific calculations  
âœ… Real-time processing  

### **Static Elements:**
ğŸ“‹ Model algorithms (rules)  
ğŸ“‹ Weight configurations  
ğŸ“‹ Classification thresholds  
ğŸ“‹ API endpoints structure  

## ğŸ”„ Comparison: Dynamic vs Static Approach

### **Current System (Dynamic):**
```
Request â†’ Calculate â†’ Return
   â†“         â†“          â†“
  Instant  Fresh    Always up-to-date
```

### **If It Were Static (Pre-computed):**
```
Pre-compute all locations â†’ Store in DB â†’ Query on request
     â†“                        â†“              â†“
  Slow build  Large storage    Fast lookup but limited
```

### **Why Dynamic is Better:**
âœ… Works for ANY location (no pre-computation needed)  
âœ… Always uses latest model logic  
âœ… No storage requirements  
âœ… Fast enough (< 1 second)  
âœ… Flexible and scalable  

## ğŸ¯ Real-World Example

**Scenario:** Score 3 different locations

### **Location 1: Delhi (28.6139, 77.2090)**
```
Request â†’ Calculate â†’ Score: 45.2 (Moderate)
Time: 120ms
```

### **Location 2: Mumbai (19.0760, 72.8777)**
```
Request â†’ Calculate â†’ Score: 62.3 (High)
Time: 115ms
Different location = Different calculations = Different result!
```

### **Location 3: Bangalore (12.9716, 77.5946)**
```
Request â†’ Calculate â†’ Score: 38.7 (Moderate)
Time: 118ms
Again, fresh calculation for this specific location!
```

**All calculated dynamically in real-time!** ğŸš€

